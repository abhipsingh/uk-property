<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.2.3/backbone-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone-forms/0.14.0/backbone-forms.min.js"></script>
<script src="http://127.0.0.1:3000/assets/bootstrap.min.js"></script>
<script src="http://127.0.0.1:3000/assets/jasny-bootstrap.js"></script>
<link rel="stylesheet" type="text/css" href="http://127.0.0.1:3000/assets/bootstrap.min.css"/>
<link rel="stylesheet" type="text/css" href="http://127.0.0.1:3000/assets/jasny-bootstrap.css"/>

<script type="text/html" id="main">
  <form class="form-right" style="margin-left: 15%; margin-right: 10%;">
    <fieldset>
      <div class="form-group">
        <label for="title">Title</label>
        <select class="form-control" id="title" placeholder="Select a title" name="title">
          <option></option>
          <option>Mr</option>
          <option>Mrs</option>
          <option>Ms</option>
        </select>
      </div>

      <div class="form-group">
        <label for="name">Name</label>
        <input type="name" class="form-control" id="name" placeholder="Enter your name">
      </div>


      <div class="form-group">
        <label for="email">Email address</label>
        <input type="email" class="form-control" id="email" placeholder="Enter your email">
      </div>

      <div class="form-group">
        <label for="address" class="control-label">Address</label>
        <div class="form-inline">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="House No"/>
          </div>
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Postcode"/>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="title">Title</label>
        <select class="form-control" id="title" placeholder="Select a title">
          <option></option>
          <option>Owner/Occupier</option>
          <option>Tenant</option>
          <option>Agent</option>
          <option>Landlord</option>
        </select>
      </div>

      <div class="form-group">
        <label for="property_type">Property Type</label>
        <select class="form-control" id="property_type" placeholder="Select a property type">
          <option></option>
          <option>Barn conversion</option>
          <option>Bungalow</option>
          <option>Cottage</option>
          <option>Country house</option>
          <option>Detached house</option>
          <option>Detached bungalow</option>
          <option>End terrace house</option>
          <option>Equestrian property</option>
          <option>Farm</option>
          <option>Barn conversion/farmhouse</option>
          <option>Farmhouse</option>
          <option>Flat</option>
          <option>Houseboat</option>
          <option>Link­detached house</option>
          <option>Lodge</option>
          <option>Maisonnette</option>
          <option>Mews house</option>
          <option>Mobile/park home</option>
          <option>Semi­detached house</option>
          <option>Semi­detached bungalow</option>
          <option>Studio</option>
          <option>Terraced house</option>
          <option>Terraced bungalow</option>
          <option>Town house</option>
          <option>Land with planning permission</option>
          <option>Land without planning permission</option>
        </select>
      </div>

      <div class="form-group">
        <label for="epc"> Epc</label></br>
        <div class="btn-group epc" id="epc" data-toggle="buttons">
            <label class="btn btn-default active">
              <input type="radio" name="options" id="option1" checked/>Yes</label>
            <label class="btn btn-default">
              <input type="radio" name="options" id="option2"/>No
            </label>
        </div>
      </div>

      <div class="form-group">
        <label for="tenure">Tenure</label>
        <select class="form-control" id="tenure" placeholder="Select a property type">
          <option></option>
          <option>Freehold</option>
          <option>Share of freehold</option>
          <option>Leasehold</option>
          <option>Don’t know</option>
        </select>
      </div>

      <div class="form-group">
        <div class="fileinput fileinput-new" data-provides="fileinput">
          <span class="btn btn-default btn-file"><span>Choose file</span><input type="file" /></span>
          <span class="fileinput-filename"></span><span class="fileinput-new">No file chosen</span>
        </div>
      </div>

      <div class="form-group">
        <label for="bedroom">Bedrooms</label>
        <select class="form-control" id="bedroom" placeholder="Select number of bedroom">
          <option></option>
          <option>0</option>
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
          <option>6</option>
          <option>7</option>
          <option>8</option>
          <option>9</option>
          <option>10+</option>
        </select>
      </div>

      <div class="form-group">
        <label for="bathroom">Bathrooms</label>
        <select class="form-control" id="bathroom" placeholder="Select number of bathroom">
          <option></option>
          <option>0</option>
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
          <option>6</option>
          <option>7</option>
          <option>8</option>
          <option>9</option>
          <option>10+</option>
        </select>
      </div>

      <div class="form-group">
        <label for="reception">Receptions</label>
        <select class="form-control" id="reception" placeholder="Select number of receptions">
          <option></option>
          <option>0</option>
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
          <option>6</option>
          <option>7</option>
          <option>8</option>
          <option>9</option>
          <option>10+</option>
        </select>
      </div>


      <div class="form-group">
        <label for="reception">Running Costs</label>
          <div class="form-group" style="margin-left: 2%;">
            <div class="form-group">
              <label for="water_cost" style="font-weight: 400;">Water (Avg. cost per month)</label>
              <input type="number" class="form-control" id="water_cost" placeholder="Enter the cost of water per month">
            </div>
            
            <div class="form-group">
              <label for="lighting_cost" style="font-weight: 400;">Lighting (per EPC) (Avg. cost per month)</label>
              <input type="number" class="form-control" id="lighting_cost" placeholder="Enter the cost of lighting per month">
            </div>

            <div class="form-group">
              <label for="heating_cost" style="font-weight: 400;">Heating (per EPC) (Avg. cost per month)</label>
              <input type="number" class="form-control" id="heating_cost" placeholder="Enter the cost of heating per month">
            </div>

            <div class="form-group">
              <label for="hot_water_cost" style="font-weight: 400;">Hot water (per EPC) (Avg. cost per month)</label>
              <input type="number" class="form-control" id="hot_water_cost" placeholder="Enter the cost of hot water per month">
            </div>

            <div class="form-group">
              <label for="council_band_cost" style="font-weight: 400;">Council Tax Band ​ (Avg. cost per month)</label>
              <input type="number" class="form-control" id="council_band_cost" placeholder="Enter the cost of council tax band">
            </div>

            <div class="form-group">
              <label for="ground_rent_charge" style="font-weight: 400;">Annual ground rent/service charge</label>
              <input type="number" class="form-control" id="ground_rent_charge" placeholder="Enter the annual rent service charge">
            </div>

            <div class="form-group">
              <label for="service_cost" style="font-weight: 400;">Annual service charge</label>
              <input type="number" class="form-control" id="service_cost" placeholder="Service charge(Per Year)">
            </div>

            <div class="form-group">
              <label for="parking_cost" style="font-weight: 400;">Annual residents parking charge</label>
              <input type="number" class="form-control" id="parking_cost" placeholder="Parking charge(Per Year)">
            </div>
          </div>

      </div>

      <div class="form-group">
        <label for="property_style">Property style</label>
        <select class="form-control" id="property_style" placeholder="Select a property style">
          <option></option>
          <option>Period</option>
          <option>New build</option>
          <option>Contemporary</option>
          <option>Purpose built</option>
          <option>Thatched</option>
          <option>Mansion block</option>
          <option>Low build</option>
          <option>Council</option>
          <option>Park home</option>
          <option>Don’t know</option>
          <option>Barn conversion</option>
          <option>Church conversion</option>
          <option>Other conversion</option>
        </select>
      </div>

      <div class="form-group">
        <label for="floors">Floors</label>
        <select class="form-control" id="floor" placeholder="Select number of floors">
          <option></option>
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5+</option>
        </select>
      </div>

      <div class="form-group">
        <label for="listed_status">Listed Status</label>
        <select class="form-control" id="listed_status" placeholder="Select a listed status">
          <option></option>
          <option>None</option>
          <option>Grade I</option>
          <option>Grade II</option>
          <option>Grade II*</option>
          <option>Locally listed</option>
          <option>Don’t know</option>
        </select>
      </div>

      <div class="form-group">
        <label for="year_built">Year Built</label>
        <select class="form-control" id="year_built" placeholder="Select the age of property">
          <option></option>
          <option>Under 10 years ago</option>
          <option>Under 25 years ago</option>
          <option>Under 50 years ago</option>
          <option>Over 50 years ago</option>
          <option>Locally listed</option>
          <option>I know exact age</option>
          <option>Don’t know</option>
        </select>
      </div>

      <div class="form-group">
        <label for="decorative_cond">Decorative Condition</label>
        <select class="form-control" id="decorative_cond" placeholder="Select a decorative condition">
          <option></option>
          <option>Newly refurbished</option>
          <option>Excellent</option>
          <option>Good</option>
          <option>Average</option>
          <option>Needs modernisation</option>
        </select>
      </div>

      <div class="form-group">
        <label for="central_heating">Central Heating</label>
        <select class="form-control" id="central_heating" placeholder="Select a central heating system">
          <option></option>
          <option>None</option>
          <option>Partial</option>
          <option>Throughout</option>
          <option>Don't know</option>
        </select>
      </div>


      <div class="form-group">
        <label for="outside_space">Outside spaces</label>
          
          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
            <input type="checkbox">Private garden
          </label>

          <label class="checkbox" style="font-weight: 400; margin-left: 1.8%;">
            <input type="checkbox">Communal garden
          </label>
          
          <label class="checkbox" style="font-weight: 400; margin-left: 1.8%;">
            <input type="checkbox">Roof terrace
          </label>

          <label class="checkbox" style="font-weight: 400; margin-left: 1.8%;">
            <input type="checkbox">Terrace
          </label>
          
          <label class="checkbox" style="font-weight: 400; margin-left: 1.8%;">
            <input type="checkbox">Balcony
          </label>
          
          <label class="checkbox" style="font-weight: 400; margin-left: 1.8%;">
            <input type="checkbox">None
          </label>
      </div>

      <div class="form-group">
        <label for="additional_features">Additional Features</label>
        <div class="row"></div>
        <div class="col-sm-2">
          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Attractive views
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Ensuite bathroom
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Loft/attic
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Rural/secluded
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Basement/cellar
          </label>
        </div>

        <div class="col-sm-2">
          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Fireplace
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Outbuildings/stables
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Swimming pool
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Bespoke fixtures
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Gated
          </label>
        </div>

        <div class="col-sm-2">
          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Penthouse
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Tennis court
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Conservatory
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Gym/sauna
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Period features
          </label>

        </div>

        <div class="col-sm-2">
          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Waterfront
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Double glazing
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Laundry/utility room
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Porter/security
          </label>

          <label class="checkbox form-group" style="font-weight: 400; margin-left: 1.8%;">
             <input type="checkbox">Wood floors
          </label>
        </div>
        <div class="row"></div>

      </div>

        <div class="form-group">
          <label for="internal_property_size">Internal space size</label>
          <select class="form-control" id="internal_property_size" placeholder="Select the internal property size">
            <option></option>
            <option>I know approx</option>
            <option>I know exactly</option>
            <option>Don't know</option>
          </select>
        </div>
          <!-- <input type="number" class="form-control" id="internal_property_size" placeholder="Select an internal property size"> -->
        
        <div class="form-group">
          <label for="external_property_size">Outside space size</label>
          <select class="form-control" id="external_property_size" placeholder="Select an external property size">
            <option></option>
            <option>I know approx</option>
            <option>I know exactly</option>
            <option>Don't know</option>
          </select>
        </div>

        

        <div data-role="dynamic-fields" style="margin-bottom: 3%;" class="form-group">
          <button class="btn btn-primary" data-role="add" id="add_improvement">
            Add a new improvement
          </button>
          <div class="row"></div>
        </div>

        <div class="form-group">
          <label for="current_agent_details">Current agent valuation</label>
          <div style="margin-left: 3%;">
            <div class="form-group" id='current_agent_details'>
              <label for="current_agent_valuation" style="font-weight: 500;">Value</label>
              <input type="number" class="form-control" id="current_agent_valuation" placeholder='Enter value in pounds'/>
            </div>

            <div class="form-group">
              <label for="current_agent_valuation_date" style="font-weight: 500;">Date of valuation</label>
              <input type="date" class="form-control" id="current_agent_valuation_date" placeholder='Select a date'/>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="vendor_personal_details">Vendor personal valuation (based on any improvements etc)</label>
          <div style="margin-left: 3%;">
            <div class="form-group" id='vendor_personal_details'>
              <label for="vendor_personal_valuation" style="font-weight: 500;">Value</label>
              <input type="number" class="form-control" id="vendor_personal_valuation" placeholder='Enter value in pounds'/>
            </div>

            <div class="form-group">
              <label for="vendor_valuation_date">Date of valuation</label>
              <input type="date" class="form-control" id="vendor_valuation_date" placeholder='Select a date'/>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="offers_above_x">Most recent sale price</label>
          <input type="number" class="form-control" id="offers_above_x" placeholder='Amount in pounds'/>
        </div>

        <div class="form-group">
          <label for="most_recent_price">Most recent sale price</label>
          <div style="margin-left: 3%;">
            <div class="form-group" id='most_recent_price'>
              <label for="most_recent_price_value" style="font-weight: 500;">Value</label>
              <input type="number" class="form-control" id="most_recent_price_value" placeholder='Enter value in pounds'/>
            </div>

            <div class="form-group">
              <label for="most_recent_price_date">Last sale date</label>
              <input type="date" class="form-control" id="most_recent_price_date" placeholder='Select a date'/>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="rental">Rentals</label>
          <div style="margin-left: 3%;">
            <div class="form-group" id='rental'>
              <label for="montly_rent_value" style="font-weight: 500;">Monthly rent value</label>
              <input type="number" class="form-control" id="montly_rent_value" placeholder='Enter value in pounds'/>
            </div>

            <div class="form-group">
              <label for="montly_rent_value_agent"> Monthly rent valuation (agent)</label>
              <input type="date" class="form-control" id="montly_rent_value_agent" placeholder='Enter a value'/>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="photos">Photos</label>
          <div style="margin-left: 3%;">
            <div class="form-group">
              <div class="fileinput fileinput-new" data-provides="fileinput">
                <span class="btn btn-default btn-file"><span>Front house</span><input type="file" /></span>
                <span class="fileinput-filename"></span><span class="fileinput-new">No file chosen</span>
              </div>
            </div>

            <div class="form-group">
              <div class="fileinput fileinput-new" data-provides="fileinput">
                <span class="btn btn-default btn-file"><span>Garden</span><input type="file" /></span>
                <span class="fileinput-filename"></span><span class="fileinput-new">No file chosen</span>
              </div>
            </div>
          </div>
        </div>

        
        <div class="form-group">
          <label for="description"> Property Description</label>
          <textarea class = "form-control" rows = "3"></textarea>
        </div>

        <div class="form-group">
          <label for="add_room">Room details</label>
          <div data-role="dynamic-fields" style="margin-bottom: 3%;" class="form-group">
            <button class="btn btn-primary" data-role="add" id="add_room">
              Add details of a room
            </button>
            <div class="row"></div>
          </div>
        </div>


        <div class="form-group">
          <label for="add_photo_room">Room photos</label>
          <div data-role="dynamic-fields" style="margin-bottom: 3%;" class="form-group">
            <button class="btn btn-primary" data-role="add" id="add_photo_room">
              Add photos of a room
            </button>
            <div class="row"></div>
          </div>
        </div>

    </fieldset>
    <button type="submit" class="btn btn-default">Submit</button>
  </form>
</script>

<script type="text/html" id="epc_file_form">
  <div class="form-group" style="margin-left: 1%; margin-top: 2px;">
    <div class="fileinput fileinput-new" data-provides="fileinput">
      <span class="btn btn-default btn-file"><span>Choose file</span><input type="file" /></span>
      <span class="fileinput-filename"></span><span class="fileinput-new">No file chosen</span>
    </div>
  </div>
</script>

<script type="text/html" id="inp_text">
  <div class="form-group" style="margin-left: 1%; margin-top: 4px;">
    <input type="text" class="form-control"/>
  </div>
</script>

<script type="text/html" id="prop_size_details">
  <div class="form-inline" style="margin-left: 1%; margin-top: 4px;">
    <label for="prop_size"> Choose area type</label>
      <div class="btn-group prop_size" id="prop_size" data-toggle="buttons">
          <label class="btn btn-default active">
            <input type="radio" name="options" id="option1"/>Sq. ft</label>
          <label class="btn btn-default">
            <input type="radio" name="options" id="option2"/>Sq. Meters</label>
      </div>

    <div class="form-group">
      <label for="prop_size_text"> Area</label>
      <input type="text" class="form-control" id="prop_size_text" placeholder="Enter area"/>
    </div>

  </div>
</script>

<script type="text/html" id="improvement_spend">
  <div class="container">
    <fieldset style="border-bottom: 1px solid #F37622; margin-top: 5px; margin-bottom: 15px;" class="col-xs-10 fieldset">
      <div class="form-inline">
        <div class="row">
          <div class="col-xs-10">
            <div class="form-group" style="width: 100%;">
                <label for="field-name" >Value(in Pounds)</label>
                <input type="text" class="form-control" id="field-name" placeholder="Enter the improvement expenses" style="width: 100%;" name="name">
            </div>
          </div>
        </div>

        <div class="row">
            <div class="col-xs-10">
              <div class="form-group" style="width: 100%;">
                  <label for="field-value">Date</label>
                  <input type="date" class="form-control" id="field-value" placeholder="Select a date" style="width: 100%;padding-left: 15px;" name="value">
              </div>
            </div>
        </div>

        <div class="row" style="margin-top: 10px; margin-bottom: 2px;">
            <div class="col-xs-10">
              <div class="form-group" style="width: 100%;">
                  <label for="improvements_list">Select the type of improvement</label>
                  <div class="row"></div>
                  <select class="form-control improvements_list" id="improvements_list">
                    <option></option>
                    <option>Total refurbishment</option>
                    <option>General maintenance</option>
                    <option>Bedroom addition</option>
                    <option>Bathroom addition</option>
                    <option>Kitchen remodel ­ basic</option>
                    <option>Kitchen remodel ­ upscale</option>
                    <option>Bathroom remodel ­ basic</option>
                    <option>Bathroom remodel ­ upscale</option>
                    <option>Landscaped garden</option>
                    <option>Ground floor extension</option>
                    <option>Conservatory addition</option>
                    <option>Loft conversion</option>
                    <option>Garage conversion</option>
                    <option>Basement/cellar conversion</option>
                    <option>Patio/terrace addition</option>
                    <option>Roof replacement</option>
                    <option>Window replacement</option>
                    <option>Freehold/leasehold extension</option>
                    <option>Others</option>
                    <option>Before/after pictures</option>
                  </select>
              </div>
            </div>
        </div>

        <div class="row">
          <button class="btn btn-danger col-md-2" data-role="remove" style="margin-left: 15px; margin-top: 15px; margin-bottom: 15px;">Remove improvement</button>
        </div>
      </div>
    </fieldset>
  </div>

</script>


<script type="text/html" id="room_details">
  <div class="container">
    <fieldset style="border-bottom: 1px solid #F37622; border-top: 1px solid #F37622; margin-bottom: 15px;" class="col-xs-10 fieldset">
      
      <div class="form-group">
        <label for="dimension_type"> Choose dimension type</label>
        <div id="dimension_type">
          <div class="btn-group prop_size" data-toggle="buttons">
              <label class="btn btn-default active">
                <input type="radio" name="options" id="option1"/>Feet</label>
              <label class="btn btn-default">
                <input type="radio" name="options" id="option2"/>Meter</label>
          </div>
        </div>
      </div>

        <div class="form-group">
          <div class="form-inline">
            <div class="form-group">
              <label for="length">Length</label>
              <input type="text" class="form-control" id="length" placeholder="Enter length"/>
            </div>
            <div class="form-group">
              <label for="width">Width</label>
              <input type="text" class="form-control" id="width" placeholder="Enter width"/>
            </div>
          </div>
        </div>

        <div class="row">
          <button class="btn btn-danger col-md-2" data-role="remove" style="margin-left: 15px; margin-bottom: 15px;">Remove room details</button>
        </div>

      </div>
    </fieldset>
  </div>
</script>

<script type="text/html" id="room_photos">
  <fieldset style="border-bottom: 1px solid #F37622; margin-top: 5px; margin-bottom: 15px;" class="col-xs-10 fieldset">
    <div class="container">
      <div class="form-group">
        <div class="fileinput fileinput-new" data-provides="fileinput">
          <span class="btn btn-default btn-file"><span>Choose photo</span><input type="file" /></span>
          <span class="fileinput-filename"></span><span class="fileinput-new">No file chosen</span>
          <span class="fileinput-remove"></span>
        </div>
      </div>
      <div class="form-group">
        <button class="btn btn-danger col-sm-2" data-role="remove" style="margin-bottom: 10px;">Remove photo</button>
      </div>
    </div>
  </fieldset>
</script>



<script type="text/javascript">
$(function() {
    Array.range= function(a, b, step){
        var A= [];
        if(typeof a== 'number'){
            A[0]= a;
            step= step || 1;
            while(a+step<= b){
                A[A.length]= a+= step;
            }
        }
        else{
            var s= 'abcdefghijklmnopqrstuvwxyz';
            if(a=== a.toUpperCase()){
                b=b.toUpperCase();
                s= s.toUpperCase();
            }
            s= s.substring(s.indexOf(a), s.indexOf(b)+ 1);
            A= s.split('');        
        }
        return A;
    }

    var form = new Backbone.Form({
        template: _.template($('#main').html()),
        submitButton: 'Submit'
    }).render();
    
    $('body').append(form.el);

    $(document).on('click', '#epc', function(e) {
      var val = $(e.target).text().replace(/^\s+|\s+$/g, '');
      var parentElem = e.target.parentElement.parentElement;
      if (val == 'Yes') {
        parentElem.appendChild(fileView.el);
      }
      else if (parentElem.children.length > 3){
          var lastElem = parentElem.lastElementChild;
          parentElem.removeChild(lastElem);
      };
    });

    $('#property_type').change(function(e) {
      var parentElem = e.target.parentElement;
      if (this.value == 'Land with planning permission') {
        var html = _.template($('#inp_text').html())();
        parser = new DOMParser(), doc = parser.parseFromString(html, "text/html");
        var inp = doc.children[0].children[1].children[0].children[0];
        inp.placeholder = "Enter the permission"
        inp.id = "permission_text"
        parentElem.appendChild(doc.children[0].children[1].children[0]);
      }
      else if ($(parentElem).find('#permission_text').length > 0){
          parentElem.lastElementChild.remove()
      };
    });

    $('#year_built').change(function(e) {
      var parentElem = e.target.parentElement;
      if (this.value == 'I know exact age') {
        var html = _.template($('#inp_text').html())();
        parser = new DOMParser(), doc = parser.parseFromString(html, "text/html");
        var inp = doc.children[0].children[1].children[0].children[0];
        inp.placeholder = "Please enter the year"
        inp.id = "input_year"
        inp.type = "number"
        parentElem.appendChild(doc.children[0].children[1].children[0]);
      }
      else if ($(parentElem).find('#input_year').length > 0){
          parentElem.lastElementChild.remove()
      };
    });

    $('#internal_property_size').change(function(e) {
      var parentElem = e.target.parentElement;
      if ($(parentElem).find('#prop_size_text').length > 0) {
          parentElem.lastElementChild.remove()
      };
      
      if (this.value == 'I know approx' || this.value == 'I know exactly') {
        var html = _.template($('#prop_size_details').html())();
        parser = new DOMParser(), doc = parser.parseFromString(html, "text/html");
        var inp = doc.children[0].children[1].children[0].children[0];
        parentElem.appendChild(doc.children[0].children[1].children[0]);
      };

    });

    $('#external_property_size').change(function(e) {
      var parentElem = e.target.parentElement;
      if ($(parentElem).find('#prop_size_text').length > 0) {
          parentElem.lastElementChild.remove()
      };
      
      if (this.value == 'I know approx' || this.value == 'I know exactly') {
        var html = _.template($('#prop_size_details').html())();
        parser = new DOMParser(), doc = parser.parseFromString(html, "text/html");
        var inp = doc.children[0].children[1].children[0].children[0];
        parentElem.appendChild(doc.children[0].children[1].children[0]);
      };

    });

    $(document).on(
          'click',
          '[data-role="dynamic-fields"] [data-role="remove"]',
          function(e) {
              e.preventDefault();
              $(this).closest('.fieldset').remove();
          }
    );
      // Add button click
    $('#add_improvement').click(function(e) {
            var html = _.template($('#improvement_spend').html())();
            e.preventDefault();
            var container = $(this).closest('[data-role="dynamic-fields"]');
            var add = $(this).closest('[data-role="add"]');
            var xmlString =html;
            parser = new DOMParser(), doc = parser.parseFromString(xmlString, "text/html");
            container[0].insertBefore(doc.children[0].children[1].children[0], add[0]);
            $('.improvements_list').change(function(e_inner) {
                    e_inner.preventDefault();
                    if (this.value == 'Others') {
                        var html = _.template($('#inp_text').html())();
                        var container = $(this).closest('.form-group');
                        parser = new DOMParser(), doc = parser.parseFromString(html, "text/html");
                        var inp = doc.children[0].children[1].children[0].children[0];
                        inp.style = "width: 150%;"
                        var inp_group = doc.children[0].children[1].children[0];
                        inp.placeholder = "Please enter the type of improvement";
                        inp_group.style = "";
                        container[0].appendChild(doc.children[0].children[1].children[0]);
                    }
                    else if(this.parentElement.childElementCount > 3) {
                        this.parentElement.children[3].remove();
                    };
                    
                }
            );
        }
    );

    $('#add_room').click(function(e) {
            var html = _.template($('#room_details').html())();
            e.preventDefault();
            var container = $(this).closest('[data-role="dynamic-fields"]');
            var add = $(this).closest('[data-role="add"]');
            var xmlString =html;
            parser = new DOMParser(), doc = parser.parseFromString(xmlString, "text/html");
            container[0].insertBefore(doc.children[0].children[1].children[0], add[0]);
        }
    );

  $('#add_photo_room').click(function(e) {
            var html = _.template($('#room_photos').html())();
            e.preventDefault();
            var container = $(this).closest('[data-role="dynamic-fields"]');
            var add = $(this).closest('[data-role="add"]');
            var xmlString =html;
            parser = new DOMParser(), doc = parser.parseFromString(xmlString, "text/html");
            container[0].insertBefore(doc.children[0].children[1].children[0], add[0]);
        }
    );

});

</script>
